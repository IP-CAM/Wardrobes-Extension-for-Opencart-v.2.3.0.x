$(document).ready(function () {    $('.popup .close_window, .overlay').click(function (){        $('.overlay').hide(40);        $('.popup').hide(400);    });    $(document).keydown(function(e) {        if( e.keyCode === 27 ) {            $('.overlay').hide(40);            $('.popup').hide(400);        }    });    // Checkout Закрытие по кнопке    $(document).on('keydown', '#collapse-checkout-option input[name=\'email\'], #collapse-checkout-option input[name=\'password\']', function(e) {        if (e.keyCode == 13) {            $('#collapse-checkout-option #button-login').trigger('click');        }    });});jQuery.fn.center = function () {    this.css("position","absolute");    //alert('($(window).height() - $(this).outerHeight()) / 2)' + ($(window).height() - $(this).outerHeight()) / 2);    if ($('#home').length > 0) {        this.css("top", Math.max(0, ((($(window).height()/3) - $(this).outerHeight()) / 2) +        $(window).scrollTop()) + "px");    } else {        this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) +        $(window).scrollTop()) + "px");    }    /*this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) +     $(window).scrollLeft()) + "px");*/    return this;}/* id - id должен быть как в data-modal элементов, которые относятся к этому вызову type - тип страницы, передается в БД, чтобы знать, откуда заходил человек modal - если 1, то просим ввести телефон, если 0 - то отправляем данные на сервер parametr - дополнительные параметры для передачи, например цена */function ajaxClientCall(id, type, modal, parametr) {    var button = $("button[data-modal], input[type='submit'][data-modal], input[type='button'][data-modal]"); //TODO    var field = $("textarea[data-modal], input[type='text'][data-modal], input[type='hidden'][data-modal]");    var data = "";    if(id == undefined) {        id = 1;    }    $(field).each(function (index, value) {        if($(this).data('modal') == id) {            data += "&" + $(this).attr('name') + "=" + $(this).val();        }    });    if(parametr != undefined) {        data +=  "&" + parametr;    }    if(type == undefined) {        data += '&type=0';    } else {        data += '&type=' + type;    }    if(modal == undefined) {        data += '&two_modal=0';    } else {        data += '&two_modal=' + modal;    }    $.ajax({        url: 'index.php?route=customer/customer/ajaxAddCustomer',        dataType: 'json',        data: data,        type: 'post',        beforeSend: function () {        },        success: function (json) {            var html = json['html'];            //CHECKOUT FOR MODAL WINDOW            $('.popup.modal_window_box').empty();            $('.popup.modal_window_box').append(html);            $('.overlay').show(0);            $('.popup').show(200);            $('.popup').center();        },        error: function (xhr, ajaxOptions, thrownError) {            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);        }    });}