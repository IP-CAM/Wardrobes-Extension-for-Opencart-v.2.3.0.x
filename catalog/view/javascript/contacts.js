$(document).ready(function () {    var height_img_box = 180;    var width_img_box = 170;    var wh_img = [];    // рапределяем миниатюра по длинне,    // смещая их по горизонтали    $(".img-box").each(function(index) {        var left = (index * (width_img_box + 15)) + 0;          if(index == 1 || index == 4) {            left -= 1;        }        $(this).css("left", left + "px");        var elem = $(this).find('img').clone();        elem.css({'width':'auto', 'height' : 'auto'});        $('body').before(elem);        var top_img_sub = Math.round(-1*($(this).find('img').height()-height_img_box)/2);        var left_img_sub = Math.round(-1*($(this).find('img').width()-width_img_box)/2);                  $(this).find('img').css('border-radius', '6px');        if(elem.width() > elem.height()) {            $(this).find('img').css({                top: top_img_sub,                left: left_img_sub            });        } else {            $(this).find('img').css({                top: 0,                left: 0,                width: '100%'            });        }        wh_img.push([left, elem.width(), elem.height()]);        elem.remove();    });    $(".img-box").hover(        // при наведении курсора мыши        function() {            var left_img_show = wh_img[$(this).index()][0] - ((wh_img[$(this).index()][1]-width_img_box)/2);            var top_img_show = -1*(wh_img[$(this).index()][2]-height_img_box)/2;            $(this).find('img').addClass('img-gr');            $(this).css("z-index", 1);            $(this).animate({                height  : wh_img[$(this).index()][2],                width   : wh_img[$(this).index()][1],                left            : left_img_show,                top             : top_img_show            }, "fast");        },        function() {            // hover out            $(this).find('img').removeClass('img-gr');            $(this).css("z-index", 0);            $(this).stop(true);            $(this).animate({                height  : height_img_box,                width   : width_img_box,                left            : wh_img[$(this).index()][0],                top             : 0            }, "fast");        });});