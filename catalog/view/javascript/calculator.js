$(document).ready(function () {    var standard_text = 'стандарт';    var exclusive_text = 'эксклюзив';    var min_slider = 100; //Минимальное значение ползунка    var max_slider = 240; //Максимальное значение ползунка    $("[name='width-text-mobile']").text(min_slider);    $("[name='exclusive-box']").hide();    $('#standard p').addClass('active-button');    $("[name='cal_sub_price']").text(exclusive_text + ' ' + $("[name='cal_sub_price']").text());    $('.calculator_dispatch .error').hide();    $('#quest-calculation').mouseenter(function () {        $('#message-calculation').show();        $('#cal-calculation-box').append($('#message-calculation'));    });    $('#quest-calculation').mouseleave(function () {        $('#message-calculation').hide();    });    var slider = $("[name='slider-range']:visible");    slider.slider({        min: min_slider,        max: max_slider,        step: 10,        value: min_slider,        slide: function (event, ui) {            $('.number').css('left', event.clientX-268);            $('.number').text(ui.value);            $("#input_width").val(ui.value);            activeStandard();        },        create: function (event, ui) {            if(mobileDetect()) {            } else {                $(this).find('.ui-slider-handle.ui-corner-all.ui-state-default').before('<div class="number"></div>');            }            $('.number').text('100');        }    });    //Костыль для слайдера    activeStandard();    $("[name='standard-box']").mousemove(function() {        var val = $('.ui-slider-handle').css('left');        $('.number').css('left', val);        activeStandard();    });    setInterval(function() {        if($("[name='standard-box']").is(':visible')) {            var val = $('.ui-slider-handle').css('left');            $('.number').css('left', val);            activeStandard();        }    }, 100);    $("[name='standard']").click(function () {        //$(this).append($('#calculator_active_img'));        $("[name='exclusive-box']").hide();        $("[name='standard-box']").show();        $("[name='standard'] p").addClass('active-button');        $("[name='exclusive'] p").removeClass('active-button');        var text = $("[name='cal_sub_price']").text();        text = text.replace(standard_text, exclusive_text);        $("[name='cal_sub_price']").text(text);        $("[name='type']").val(0);        $('#input_height').val('240');        $('#input_depth').val('60');        activeStandard();        $("[name='cal_sub_price']").removeClass('mini');    });    $("[name='exclusive']").click(function () {        $("[name='exclusive-box']").show();        $("[name='standard-box']").hide();        $("[name='exclusive'] p").addClass('active-button');        $("[name='standard'] p").removeClass('active-button');        var text = $("[name='cal_sub_price']").text();        text = text.replace(exclusive_text, standard_text);        $("[name='cal_sub_price']").text(text);        $("[name='type']").val(1);        activeExclusive();    });    //Вызов модального окна    $("[name='calculation_button'], [name='banner']").click(function () {        if ($("[name='standard-box']").is(':visible')) {            var price = 'price=' + $("[name='cal_top_price']:visible").text();            ajaxClientCall(1, 0, 1, price);            if(mobileDetect()) {                ajaxClientCall(2, 1, 1, price);            } else {                ajaxClientCall(1, 1, 1, price);            }            //alert('1,0,1');        }        if ($("[name='exclusive-box']").is(':visible')) {            var price = 'price=' + $("[name='cal_top_price']:visible").text();            if(mobileDetect()) {                ajaxClientCall(2, 1, 1, price);            } else {                ajaxClientCall(1, 1, 1, price);            }            //alert('1,1,1');        }        $("[name='two_modal']").val(1);    });    $("[name='dispatch-button']:visible").click(function (event) {        var text = $("[name='telephone']:visible").val();        var price = 'price=' + $("[name='cal_top_price']:visible").text();        if (text == '') {            if($(window).width() < 480) {                $('.calculator_dispatch').css('top', '60%');            }            $('.calculator_dispatch .error').show();            return false;        } else {            $('.calculator_dispatch .error').hide();            if($(window).width() < 480) {                $('.calculator_dispatch').css('top', '75%');            }            if(mobileDetect()) {                ajaxClientCall(2, 2, 0, price);            } else {                ajaxClientCall(1, 2, 0, price);            }        }    });    var root_size = null;    if(mobileDetect()) {         root_size = $(".hidden-lg .exclusive-box");    } else {         root_size = $(".visible-lg .exclusive-box");    }    var input_size = root_size.find("[name='width'], [name='height'], [name='depth']"); //Для эксклюзивного выбора    input_size.keypress(function () {        activeExclusive();    });    input_size.change(function () {        activeExclusive();    });    input_size.keydown(function () {        activeExclusive();    });    input_size.keyup(function () {        activeExclusive();    });    function activeExclusive() {        $("[name='cal_top_price']").text(calcExclusive() + ' рублей');        var root = null;        if(mobileDetect()) {            root = $(".hidden-lg .exclusive-box");        } else {            root = $(".visible-lg .exclusive-box");        }        var width = root.find("[name='width']").val();        if(calcStandard(width)) {            slider.slider( "option", "value", Number(width));            $("[name='cal_sub_price']").text(standard_text + ' ' + calcStandard(slider.slider( "option", "value" )) + ' рублей');            $("[name='cal_sub_price']").removeClass('mini');        } else {            $("[name='cal_sub_price']").text('Стандарт - Нет такой позиции');            $("[name='cal_sub_price']").addClass('mini');        }    }    function activeStandard() {        //var value = slider.slider( "option", "value" );        $("[name='cal_top_price']").text(Math.round(calcStandard(slider.slider( "option", "value" ))) + ' рублей');        $("[name='width-text-mobile']").text(slider.slider( "option", "value" ));        $("[name='cal_sub_price']").text(exclusive_text + ' ' + calcExclusive() + ' рублей');    }    function calcStandard(value) {        //Прямая зависимость        var price = 0;        switch(Number(value)) {            case 100:                price = 8400;            break;            case 110:                price = 13400;                break;            case 120:                price = 14800;                break;            case 130:                price = 16050;                break;            case 140:                price = 17700;                break;            case 150:                price = 19150;                break;            case 160:                price = 20600;                break;            case 170:                price = 22100;                break;            case 180:                price = 23550;                break;            case 190:                price = 24850;                break;            case 200:                price = 26400;                break;            case 210:                price = 27850;                break;            case 220:                price = 29250;                break;            case 230:                price = 30700;                break;            case 240:                price = 32150;                break;        }        return price;    }    function calcExclusive() {        var root = null;        var width = null;        if(mobileDetect()) {            root = $(".hidden-lg .exclusive-box");        } else {            root = $(".visible-lg .exclusive-box");        }        if($("[name='exclusive-box']").is(':visible')) {            width = root.find("[name='width']").val();        } else {            width = slider.slider( "option", "value" )        }        var height = root.find("[name='height']").val();        var depth = root.find("[name='depth']").val();        if (width != "" && height != "" && depth != "") {            var height_rep_1 = 100;            var height_rep_2 = 150;            var height_rep_3 = 273;            var height_sum = 0;            if (height < height_rep_1) {                height_sum = 10000;            } else if (height < height_rep_2) {                height_sum = 12200;            } else {                height_sum = 15100;            }            var width_sum = (height_sum * width) / 100;            var depth_sum = 0;            var reper_depth = 61;            if (depth < reper_depth) {                depth_sum = 0;            } else {                depth_sum = (depth - reper_depth) * 1100;            }            var sum = width_sum + depth_sum;            if (height > height_rep_3) {                sum = sum * 1.30;            }            return Math.round(sum/10)*10;        }        return -1;    }});