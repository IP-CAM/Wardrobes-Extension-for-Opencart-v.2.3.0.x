$(document).ready(function () {    var bilVisov = false;    var price_for_1m_default = 18000;    var price_for_1m_prihogii_default = 8750;    var min_slider_width = 100; //Минимальное значение ползунка    var max_slider_width = 240; //Максимальное значение ползунка   // alert(price_for_1m_na_zakaz);    var slider_1 = $("[name='slider-range-1']:visible");    var handle_1 = $(".custom-handle-1 .value-output");    if(mobileDetect()) {        handle_1 = $('[name="width_mobile"]');    }    slider_1.slider({        min: min_slider_width,        max: max_slider_width,        step: 10,        value: min_slider_width,        create: function() {            handle_1.text($(this).slider("value"));        },        slide: function(event, ui) {            handle_1.text(ui.value);            activePrice(); //Обновляем цену        }    });    var min_slider_depth = 60; //Максимальное значение ползунка    var max_slider_depth = 300; //Максимальное значение ползунка    var slider_2 = $("[name='slider-range-2']");    var handle_2 = $(".custom-handle-2 .value-output");    if(mobileDetect()) {        handle_2 = $('[name="depth_mobile"]');    }    slider_2.slider({        min: min_slider_depth,        max: max_slider_depth,        step: 10,        value: min_slider_depth,        create: function() {            handle_2.text($(this).slider("value"));        },        slide: function(event, ui) {            handle_2.text(ui.value);            activePrice(); //Обновляем цену        }    });    $("[name='width-text-mobile']").text(min_slider_width);    $("[name='depth-text-mobile']").text(min_slider_depth);    ajaxRenderRoot($(".box_root_item[data-category_id_root='59']")); //По умолчанию эта категория активна    //Выбор главной категории    $("[data-category_id_root]:visible").click(function () {        ajaxRenderRoot($(this));    });    //$('#calculator .box_root_item.no-active img').css({'transition-property': 'all', 'transition-duration': '0.2s'});    //$('#calculator .box_root_item p').css({'transition-property': 'all', 'transition-duration': '0.2s'});    //$('#calculator .box_root_item.box .category_check .checkmark').css({'transition': 'width 0.2s, opacity 0.05s'});    function ajaxRenderRoot(this_root_item) {        var id = this_root_item.data('category_id_root');        //alert(id);        $("[name='root_check']").val(id);       // $(".box_root_item:visible").find('p').addClass('no-active');        $(".box_root_item:visible").addClass('no-active');        $('.box_root:visible').find('.category_check').removeClass('checkmark');        this_root_item.find(".category_check").addClass('checkmark');        this_root_item.removeClass('no-active');        ajaxViewCategory(); //Вид калькулятора в зависемости от выбранного вида категории    }    function ajaxViewCategory() {        $("[name='height']").removeClass();        $("[name='depth']").removeClass();        $('.slider-2').hide();        switch(Number($("[name='root_check']").val())) {            case 59:                $("[name='height']").text('Высота: любая');                $("[name='depth']").text('Глубина: любая');                $("[name='depth']").show();                break;            case 67:                $("[name='height']").text('Высота: 220-240 см');                $("[name='depth']").text('Глубина: 60 см');                $("[name='depth']").addClass('standard');                $("[name='depth']").show();                break;            case 68:                $('.slider-2').show();                $("[name='height']").addClass('garderob');                $("[name='height']").text('Высота: любая');                $("[name='depth']").hide();                break;            case 69:                $("[name='height']").text('Высота: любая');                $("[name='depth']").text('Глубина: 20-60 см');                $("[name='depth']").show();                break;            case 73:                $("[name='height']").text('Высота: любая');                $("[name='depth']").hide();                break;        }        activePrice(); //Обновляем цену    }    function activePrice() { //Обновляем цену        //var value = slider.slider( "option", "value" );        var width = 0;        var depth = 0;        if(mobileDetect()) {             width = handle_1.text();             depth = handle_2.text();        } else {            width = handle_1.text();            depth = handle_2.text();        }        var price = 0;        switch (Number($("[name='root_check']").val())) {            case 59:                price = calcZakaz(width);                break;            case 67:                price = calcStandard(width);                break;            case 68:                price = calcGarderob(width, depth);                break;            case 69:                price = calcPrihogii(width);                break;            case 73:                price = calcDoors(width);                break;        }        price = Math.round(price);        price = normPrice(String(price));        if(bilVisov) {            $("[name='price']").css('opacity' , '0.0');            setTimeout(function(){                $("[name='price']").css('opacity' , '1.0');            }, 300);        }        $("[name='price']").text(price);        $("[name='width-text-mobile']").text(slider_1.slider( "option", "value" )); //mobile        $("[name='depth-text-mobile']").text(slider_2.slider( "option", "value" )); //mobile    }    function normPrice(price) {        var normPrice = '';        if(price.length > 3) {            var margin = 0;            if(price.length == 4) {                margin = 1;            } else {                margin = 2;            }            var left_text = price.substr(0,margin);            var right_text = price.substr(margin);            normPrice = left_text + ' ' + right_text;        } else {            normPrice = price;        }        return normPrice;    }    function calcZakaz(width) {        //Прямая зависимость        var width_modul = Number(width) - 100;        width_modul = width_modul/100;        var price = 0;        if(price_for_1m_na_zakaz != -1) {            price = price_for_1m_na_zakaz + (width_modul * price_for_1m_na_zakaz);        } else {            price = price_for_1m_default + (width_modul * price_for_1m_default);        }     //   alert(price);        return price;    }    function calcStandard(value) {        //Прямая зависимость        var price = 0;        switch(Number(value)) {            case 100:                price = 8400;                break;            case 110:                price = 13400;                break;            case 120:                price = 14800;                break;            case 130:                price = 16050;                break;            case 140:                price = 17700;                break;            case 150:                price = 19150;                break;            case 160:                price = 20600;                break;            case 170:                price = 22100;                break;            case 180:                price = 23550;                break;            case 190:                price = 24850;                break;            case 200:                price = 26400;                break;            case 210:                price = 27850;                break;            case 220:                price = 29250;                break;            case 230:                price = 30700;                break;            case 240:                price = 32150;                break;        }        return price;    }    function calcGarderob(width, depth) {        //Прямая зависимость        var width_modul = Number(width) - 100;        width_modul = width_modul/100;        var price = 0;        if(price_for_1m_garderob != -1) {            price = price_for_1m_garderob + (width_modul * price_for_1m_garderob);        } else {            price = price_for_1m_default + (width_modul * price_for_1m_default);        }        //Расчет глубины:        depth = depth - 60;        depth = depth/10;        price = price + (depth * 1100);        return price;    }    function calcPrihogii(width) {        //Прямая зависимость        var width_modul = Number(width) - 100;        width_modul = width_modul/100;        var price = 0;        if(price_for_1m_prihogie != -1) {            price = price_for_1m_prihogie + (width_modul * price_for_1m_prihogie);        } else {            price = price_for_1m_default + (width_modul * price_for_1m_default);        }        return price;    }    function calcDoors(width) {        //Прямая зависимость        var width_modul = Number(width) - 100;        width_modul = width_modul/100;        var price = 0;        if(price_for_1m_doors  != -1) {            price = price_for_1m_doors  + (width_modul * price_for_1m_doors );        } else {            price = price_for_1m_default + (width_modul * price_for_1m_default);        }        return price;    }    bilVisov = true; //При 0 - значит первая загрузка страницы});